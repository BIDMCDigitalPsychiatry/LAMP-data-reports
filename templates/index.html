{% extends "base.html" %}
{% block title %}Generate Report{% endblock %}
{% block content %}

<div class="container" style="max-width:600px">
  <form id="textForm"
        class="card p-4 shadow-sm"
        method="post"
        action="{{ url_for('generate_report') }}">

    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

    <div class="mb-3">
      <label class="form-label fw-semibold" for="participant_id">Participant ID</label>
      <input class="form-control" id="participant_id" name="participant_id"
             placeholder="U0123456789" required>
    </div>

    <div class="mb-3">
      <label class="form-label fw-semibold" for="start_date">Start Date</label>
      <input type="date" class="form-control" id="start_date" name="start_date" required>
    </div>

    <div class="mb-3">
      <label class="form-label fw-semibold" for="report_sel">Choose report</label>
      <select class="form-select" name="report_id" id="report_sel" required>
        {% for r in reports %}
          <option value="{{ r.site }}/{{ r.file }}">{{ r.label }}</option>
        {% endfor %}
      </select>
    </div>

    <div class="mb-4">
      <label class="form-label fw-semibold" for="output_format">Output Format</label>
      <select class="form-select" name="output_format" id="output_format" required>
        <option value="pdf">PDF</option>
        <option value="html">HTML</option>
      </select>
    </div>

    <button class="btn btn-primary w-100">Generate</button>
  </form>

  <p id="responseMessage" class="mt-3 text-center"></p>
</div>

<script src="{{ url_for('static', filename='scripttest.js') }}"></script>
{% endblock %}
